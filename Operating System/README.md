## 执行一个程序，操作系统做了什么？
- 用户告诉操作系统执行helloworld程序（命令行，点击鼠标）
- 操作系统去磁盘上找到程序的相关信息，检查是否是**可执行文件**，根据程序首部信息，确定代码和数据在可执行文件中的位置并且计算出对应的磁盘地址。
- 操作系统创建一个新的**进程**，将可执行文件映射到该进程结构，并由该进程执行helloworld程序。
- 为helloworld程序设置**CPU**上下文环境，并跳到程序开始处。
- 执行helloworld程序的第一条指令，会发生缺页异常。
- 操作系统分配一页物理内存，并将代码从磁盘读入内存，然后继续执行helloworld程序。
- helloworld程序执行函，在显示器上写字符串。
- 操作系统找到要将字符串送往的显示设备（通常由一个进程控制，所以要将字符串送给进程）。
- 控制设备的进程会告诉设备的窗口系统要显示字符串，窗口系统确定这是一个合法的操作，将字符串转换成像素，将像素写入设备的存储映像区。
- 视频硬件将像素转换成显示器可以接受的一组控制数据信号，显示器解释信号，激发液晶屏。

## 操作系统是什么

### 定义：
- 操作系统是计算机系统中的一个系统软件，是一些程序模块的集合。
- 提供用户接口，方便用户控制计算机；
- 负责为应用程序分配和调度软硬件资源，控制协调程序的并发互动，帮助用户存取和保护信息

### 功能：
- **进程管理（CPU管理）：** 进程控制，进程调度，进程通信
- **内存管理：** 内存分配，内存共享，内存保护，虚拟内存
- **设备管理：** 设备的分配和调度，设备无关性，设备传输控制，设备驱动
- **文件管理：** 存储空间管理，文件操作，目录操作，文件和目录的存取权限管理

## 操作系统的四个典型阶段
- **手动操作（50年代早期）：** 效率低，用户独占，缺少交互。
- **单道批处理系统（50年代）：** 管理员事先将多个作业输入到磁盘形成队列，操作系统依次自动处理队列中的每个作业。自动完成，效率高了,外设与CPU交替空闲，利用效率低。
- **多道批处理系统（60年代初）：** 在内存中存放多道程序，当某道程序因为某种原因不能继续运行而放弃CPU时，操作系统就让另一个程序投入运行，使CPU尽量忙碌。宏观并行，微观串行。处理时间长，交互能力差，运行过程不确定。
- **分时系统（60年代中）：** 事务性任务的涌现，要求支持多任务多用户，出现多终端计算机。主机以很短的“时间片”为单位，把CPU轮流分给每个终端使用，直到全部作业被运行完。多路调制性，独占性，交互性。

## 操作系统的逻辑结构（OS的设计和实现思路）
- **整体式结构：** 模块设计、编码和调试独立，模块调用自由，通信多以全局变量形式完成。信息传递随意，维护和更新困难。
- **层次式结构：** 所有功能模块按照调用次序排成若干层，相邻层之间只有单向依赖和单向调用。结构清晰，避免循环调用，整体问题局部化，系统的正确性容易保证，有利于操作系统的维护扩充和移植。
- **微内核结构（客户/服务器结构）：** 微内核：足够小，提供操作系统最基本的核心功能。 核外服务器：完成绝大部分功能，等待应用程序请求。
